var O=function(r){if(typeof document>"u")return null;var a=Array.isArray(r)?r[0]:r;return a.ownerDocument.body},f=new WeakMap,v=new WeakMap,p={},h=0,W=function(r){return r&&(r.host||W(r.parentNode))},P=function(r,a){return a.map(function(e){if(r.contains(e))return e;var u=W(e);return u&&r.contains(u)?u:(console.error("aria-hidden",e,"in not contained inside",r,". Doing nothing"),null)}).filter(function(e){return!!e})},S=function(r,a,e,u){var i=P(a,Array.isArray(r)?r:[r]);p[e]||(p[e]=new WeakMap);var o=p[e],l=[],c=new Set,b=new Set(i),y=function(t){!t||c.has(t)||(c.add(t),y(t.parentNode))};i.forEach(y);var d=function(t){!t||b.has(t)||Array.prototype.forEach.call(t.children,function(n){if(c.has(n))d(n);else try{var s=n.getAttribute(u),A=s!==null&&s!=="false",w=(f.get(n)||0)+1,M=(o.get(n)||0)+1;f.set(n,w),o.set(n,M),l.push(n),w===1&&A&&v.set(n,!0),M===1&&n.setAttribute(e,"true"),A||n.setAttribute(u,"true")}catch(E){console.error("aria-hidden: cannot operate on ",n,E)}})};return d(a),c.clear(),h++,function(){l.forEach(function(t){var n=f.get(t)-1,s=o.get(t)-1;f.set(t,n),o.set(t,s),n||(v.has(t)||t.removeAttribute(u),v.delete(t)),s||t.removeAttribute(e)}),h--,h||(f=new WeakMap,f=new WeakMap,v=new WeakMap,p={})}},D=function(r,a,e){e===void 0&&(e="data-aria-hidden");var u=Array.from(Array.isArray(r)?r:[r]),i=a||O(r);return i?(u.push.apply(u,Array.from(i.querySelectorAll("[aria-live]"))),S(u,i,e,"aria-hidden")):function(){return null}};export{D as h};
