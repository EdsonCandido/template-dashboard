import{e as te,h as L,_ as ne,a as he}from"./@babel-EnWrEA7o.js";import{m as A}from"./memoize-one-CcMeOnPo.js";import{r as E}from"./react-DvpkfkhJ.js";var re=typeof performance=="object"&&typeof performance.now=="function",k=re?function(){return performance.now()}:function(){return Date.now()};function U(l){cancelAnimationFrame(l.id)}function oe(l,t){var n=k();function r(){k()-n>=t?l.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var F=-1;function $(l){if(l===void 0&&(l=!1),F===-1||l){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),F=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return F}var z=null;function V(l){if(l===void 0&&(l=!1),z===null||l){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?z="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?z="negative":z="positive-ascending"),document.body.removeChild(t),z}return z}var ie=150,ae=function(t,n){return t};function K(l){var t,n=l.getItemOffset,r=l.getEstimatedTotalSize,i=l.getItemSize,c=l.getOffsetForIndexAndAlignment,u=l.getStartIndexForOffset,f=l.getStopIndexForStartIndex,I=l.initInstanceProps,C=l.shouldResetStyleCacheOnItemSizeChange,p=l.validateProps;return t=function(y){te(M,y);function M(v){var e;return e=y.call(this,v)||this,e._instanceProps=I(e.props,L(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:L(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=A(function(o,a,s,h){return e.props.onItemsRendered({overscanStartIndex:o,overscanStopIndex:a,visibleStartIndex:s,visibleStopIndex:h})}),e._callOnScroll=void 0,e._callOnScroll=A(function(o,a,s){return e.props.onScroll({scrollDirection:o,scrollOffset:a,scrollUpdateWasRequested:s})}),e._getItemStyle=void 0,e._getItemStyle=function(o){var a=e.props,s=a.direction,h=a.itemSize,g=a.layout,d=e._getItemStyleCache(C&&h,C&&g,C&&s),m;if(d.hasOwnProperty(o))m=d[o];else{var w=n(e.props,o,e._instanceProps),T=i(e.props,o,e._instanceProps),x=s==="horizontal"||g==="horizontal",W=s==="rtl",O=x?w:0;d[o]=m={position:"absolute",left:W?void 0:O,right:W?O:void 0,top:x?0:w,height:x?"100%":T,width:x?T:"100%"}}return m},e._getItemStyleCache=void 0,e._getItemStyleCache=A(function(o,a,s){return{}}),e._onScrollHorizontal=function(o){var a=o.currentTarget,s=a.clientWidth,h=a.scrollLeft,g=a.scrollWidth;e.setState(function(d){if(d.scrollOffset===h)return null;var m=e.props.direction,w=h;if(m==="rtl")switch(V()){case"negative":w=-h;break;case"positive-descending":w=g-s-h;break}return w=Math.max(0,Math.min(w,g-s)),{isScrolling:!0,scrollDirection:d.scrollOffset<w?"forward":"backward",scrollOffset:w,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(o){var a=o.currentTarget,s=a.clientHeight,h=a.scrollHeight,g=a.scrollTop;e.setState(function(d){if(d.scrollOffset===g)return null;var m=Math.max(0,Math.min(g,h-s));return{isScrolling:!0,scrollDirection:d.scrollOffset<m?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(o){var a=e.props.outerRef;e._outerRef=o,typeof a=="function"?a(o):a!=null&&typeof a=="object"&&a.hasOwnProperty("current")&&(a.current=o)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&U(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=oe(e._resetIsScrolling,ie)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}M.getDerivedStateFromProps=function(e,o){return le(e,o),p(e),null};var S=M.prototype;return S.scrollTo=function(e){e=Math.max(0,e),this.setState(function(o){return o.scrollOffset===e?null:{scrollDirection:o.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},S.scrollToItem=function(e,o){o===void 0&&(o="auto");var a=this.props,s=a.itemCount,h=a.layout,g=this.state.scrollOffset;e=Math.max(0,Math.min(e,s-1));var d=0;if(this._outerRef){var m=this._outerRef;h==="vertical"?d=m.scrollWidth>m.clientWidth?$():0:d=m.scrollHeight>m.clientHeight?$():0}this.scrollTo(c(this.props,e,o,g,this._instanceProps,d))},S.componentDidMount=function(){var e=this.props,o=e.direction,a=e.initialScrollOffset,s=e.layout;if(typeof a=="number"&&this._outerRef!=null){var h=this._outerRef;o==="horizontal"||s==="horizontal"?h.scrollLeft=a:h.scrollTop=a}this._callPropsCallbacks()},S.componentDidUpdate=function(){var e=this.props,o=e.direction,a=e.layout,s=this.state,h=s.scrollOffset,g=s.scrollUpdateWasRequested;if(g&&this._outerRef!=null){var d=this._outerRef;if(o==="horizontal"||a==="horizontal")if(o==="rtl")switch(V()){case"negative":d.scrollLeft=-h;break;case"positive-ascending":d.scrollLeft=h;break;default:var m=d.clientWidth,w=d.scrollWidth;d.scrollLeft=w-m-h;break}else d.scrollLeft=h;else d.scrollTop=h}this._callPropsCallbacks()},S.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&U(this._resetIsScrollingTimeoutId)},S.render=function(){var e=this.props,o=e.children,a=e.className,s=e.direction,h=e.height,g=e.innerRef,d=e.innerElementType,m=e.innerTagName,w=e.itemCount,T=e.itemData,x=e.itemKey,W=x===void 0?ae:x,O=e.layout,G=e.outerElementType,j=e.outerTagName,Z=e.style,J=e.useIsScrolling,Q=e.width,H=this.state.isScrolling,_=s==="horizontal"||O==="horizontal",X=_?this._onScrollHorizontal:this._onScrollVertical,N=this._getRangeToRender(),Y=N[0],ee=N[1],P=[];if(w>0)for(var b=Y;b<=ee;b++)P.push(E.createElement(o,{data:T,key:W(b,T),index:b,isScrolling:J?H:void 0,style:this._getItemStyle(b)}));var D=r(this.props,this._instanceProps);return E.createElement(G||j||"div",{className:a,onScroll:X,ref:this._outerRefSetter,style:ne({position:"relative",height:h,width:Q,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:s},Z)},E.createElement(d||m||"div",{children:P,ref:g,style:{height:_?"100%":D,pointerEvents:H?"none":void 0,width:_?D:"100%"}}))},S._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var o=this._getRangeToRender(),a=o[0],s=o[1],h=o[2],g=o[3];this._callOnItemsRendered(a,s,h,g)}}if(typeof this.props.onScroll=="function"){var d=this.state,m=d.scrollDirection,w=d.scrollOffset,T=d.scrollUpdateWasRequested;this._callOnScroll(m,w,T)}},S._getRangeToRender=function(){var e=this.props,o=e.itemCount,a=e.overscanCount,s=this.state,h=s.isScrolling,g=s.scrollDirection,d=s.scrollOffset;if(o===0)return[0,0,0,0];var m=u(this.props,d,this._instanceProps),w=f(this.props,m,d,this._instanceProps),T=!h||g==="backward"?Math.max(1,a):1,x=!h||g==="forward"?Math.max(1,a):1;return[Math.max(0,m-T),Math.max(0,Math.min(o-1,w+x)),m,w]},M}(E.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var le=function(t,n){var r=t.children,i=t.direction,c=t.height,u=t.layout,f=t.innerTagName,I=t.outerTagName,C=t.width,p=n.instance;if(0)var y},se=50,R=function(t,n,r){var i=t,c=i.itemSize,u=r.itemMetadataMap,f=r.lastMeasuredIndex;if(n>f){var I=0;if(f>=0){var C=u[f];I=C.offset+C.size}for(var p=f+1;p<=n;p++){var y=c(p);u[p]={offset:I,size:y},I+=y}r.lastMeasuredIndex=n}return u[n]},ue=function(t,n,r){var i=n.itemMetadataMap,c=n.lastMeasuredIndex,u=c>0?i[c].offset:0;return u>=r?B(t,n,c,0,r):ce(t,n,Math.max(0,c),r)},B=function(t,n,r,i,c){for(;i<=r;){var u=i+Math.floor((r-i)/2),f=R(t,u,n).offset;if(f===c)return u;f<c?i=u+1:f>c&&(r=u-1)}return i>0?i-1:0},ce=function(t,n,r,i){for(var c=t.itemCount,u=1;r<c&&R(t,r,n).offset<i;)r+=u,u*=2;return B(t,n,Math.min(r,c-1),Math.floor(r/2),i)},q=function(t,n){var r=t.itemCount,i=n.itemMetadataMap,c=n.estimatedItemSize,u=n.lastMeasuredIndex,f=0;if(u>=r&&(u=r-1),u>=0){var I=i[u];f=I.offset+I.size}var C=r-u-1,p=C*c;return f+p},ve=K({getItemOffset:function(t,n,r){return R(t,n,r).offset},getItemSize:function(t,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:q,getOffsetForIndexAndAlignment:function(t,n,r,i,c,u){var f=t.direction,I=t.height,C=t.layout,p=t.width,y=f==="horizontal"||C==="horizontal",M=y?p:I,S=R(t,n,c),v=q(t,c),e=Math.max(0,Math.min(v-M,S.offset)),o=Math.max(0,S.offset-M+S.size+u);switch(r==="smart"&&(i>=o-M&&i<=e+M?r="auto":r="center"),r){case"start":return e;case"end":return o;case"center":return Math.round(o+(e-o)/2);case"auto":default:return i>=o&&i<=e?i:i<o?o:e}},getStartIndexForOffset:function(t,n,r){return ue(t,r,n)},getStopIndexForStartIndex:function(t,n,r,i){for(var c=t.direction,u=t.height,f=t.itemCount,I=t.layout,C=t.width,p=c==="horizontal"||I==="horizontal",y=p?C:u,M=R(t,n,i),S=r+y,v=M.offset+M.size,e=n;e<f-1&&v<S;)e++,v+=R(t,e,i).size;return e},initInstanceProps:function(t,n){var r=t,i=r.estimatedItemSize,c={itemMetadataMap:{},estimatedItemSize:i||se,lastMeasuredIndex:-1};return n.resetAfterIndex=function(u,f){f===void 0&&(f=!0),c.lastMeasuredIndex=Math.min(c.lastMeasuredIndex,u-1),n._getItemStyleCache(-1),f&&n.forceUpdate()},c},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){var n=t.itemSize}});var pe=K({getItemOffset:function(t,n){var r=t.itemSize;return n*r},getItemSize:function(t,n){var r=t.itemSize;return r},getEstimatedTotalSize:function(t){var n=t.itemCount,r=t.itemSize;return r*n},getOffsetForIndexAndAlignment:function(t,n,r,i,c,u){var f=t.direction,I=t.height,C=t.itemCount,p=t.itemSize,y=t.layout,M=t.width,S=f==="horizontal"||y==="horizontal",v=S?M:I,e=Math.max(0,C*p-v),o=Math.min(e,n*p),a=Math.max(0,n*p-v+p+u);switch(r==="smart"&&(i>=a-v&&i<=o+v?r="auto":r="center"),r){case"start":return o;case"end":return a;case"center":{var s=Math.round(a+(o-a)/2);return s<Math.ceil(v/2)?0:s>e+Math.floor(v/2)?e:s}case"auto":default:return i>=a&&i<=o?i:i<a?a:o}},getStartIndexForOffset:function(t,n){var r=t.itemCount,i=t.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(t,n,r){var i=t.direction,c=t.height,u=t.itemCount,f=t.itemSize,I=t.layout,C=t.width,p=i==="horizontal"||I==="horizontal",y=n*f,M=p?C:c,S=Math.ceil((M+r-y)/f);return Math.max(0,Math.min(u-1,n+S-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var n=t.itemSize}});export{pe as F,ve as V};
