function N(t,e){if(!t){e(void 0);return}e({width:t.offsetWidth,height:t.offsetHeight});const n=t.ownerDocument.defaultView??window,m=new n.ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const[w]=a;let u,s;if("borderBoxSize"in w){const c=w.borderBoxSize,g=Array.isArray(c)?c[0]:c;u=g.inlineSize,s=g.blockSize}else u=t.offsetWidth,s=t.offsetHeight;e({width:u,height:s})});return m.observe(t,{box:"border-box"}),()=>m.unobserve(t)}var E=()=>typeof document<"u";var y=!1,i=null,r=!1,d=!1,f=new Set;function l(t,e){f.forEach(n=>n(t,e))}var v=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function b(t){return!(t.metaKey||!v&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function p(t){r=!0,b(t)&&(i="keyboard",l("keyboard",t))}function o(t){if(i="pointer",t.type==="mousedown"||t.type==="pointerdown"){r=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch{}if(n)return;l("pointer",t)}}function S(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function T(t){S(t)&&(r=!0,i="virtual")}function D(t){t.target===window||t.target===document||t.target instanceof Element&&t.target.hasAttribute("tabindex")||(!r&&!d&&(i="virtual",l("virtual",t)),r=!1,d=!1)}function A(){r=!1,d=!0}function h(){return i!=="pointer"}function M(){if(!E()||y)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){r=!0,t.apply(this,n)},document.addEventListener("keydown",p,!0),document.addEventListener("keyup",p,!0),document.addEventListener("click",T,!0),window.addEventListener("focus",D,!0),window.addEventListener("blur",A,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",o,!0),document.addEventListener("pointermove",o,!0),document.addEventListener("pointerup",o,!0)):(document.addEventListener("mousedown",o,!0),document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",o,!0)),y=!0}function k(t){M(),t(h());const e=()=>t(h());return f.add(e),()=>{f.delete(e)}}export{k as a,N as t};
